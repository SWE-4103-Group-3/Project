<div style="width:50%; margin: auto; padding-bottom: 60px;" class="collapse" id="courseForm">
    <form action="/course" method="post">

        <input value="{{ course.id }}" type="hidden" name="id">

        <input value="{{ course.instructor.id }}" type="hidden" name="instructor.id">

        <div class="md-form">
            <input id="courseName" value="{{ course.name }}" type="text" name="name" class="form-control" id="courseFormName">
            <label for="courseName">Name</label>
        </div>

        <div class="md-form">
            <input id="courseSection" value="{{ course.section }}"  type="text" name="section" class="form-control">
            <label for="courseSection">Section</label>
        </div>

        <div class="md-form">
            <input  id="startDate" value="{{ course.startDate }}" name="startDate" type="text" class="form-control datepicker">
            <label for="startDate">Start Date</label>
        </div>

        <div class="md-form">
            <input id="courseRows" value="{{ course.rows }}" name="rows" type="number" class="form-control">
            <label for="courseRows">Rows</label>
        </div>

        <div class="md-form">
            <input id="courseCols" value="{{ course.cols }}" name="cols" type="number" class="form-control">
            <label for="courseCols">Columns</label>
        </div>

        <div class="md-form">
            {# the css expects two seperate class descriptions like this for some reason #}
            <button type="button" data-target="#courseForm" class="btn btn-blue-grey" data-toggle="collapse"
                    aria-expanded="false" aria-controls="courseForm">Cancel
            </button>
            <input type="submit" class="btn btn-primary" value="Submit" class="form-control">
            {% if (course.id) %}
                <div style="float:right">
                    <button id="deleteButton" type="button" disabled="true" class="btn btn-blue-grey" >
                        Delete
                    </button>
                    <div style="padding: 15px">
                        <input id="confirmDelete" type="checkbox">
                        <label for="confirmDelete">Check to confirm delete</label>
                    </div>
                </div>
            {% endif %}
        </div>
    </form>

</div>

<script>
    $('#confirmDelete').change(function() {
        $('#deleteButton').attr('disabled',!this.checked);
    });

    $('#deleteButton').click(function() {
        $.ajax({
            type: "post",
            url: "/courses/{{course.id}}/delete",
            contentType: "application/json",
            error: function (data, status) {
                console.error(data);
            },
            success: function (data){
                toastr.success("Course successfully deleted.");
                setTimeout(function(){
                    window.location.replace("/{{ username }}");
                },1600);

            }
        });
    })

    $(document).ready(function () {
        $('.datepicker').pickadate({
            formatSubmit: 'yyyy-mm-dd',
            hiddenName: true
        });
        $('.timepicker').pickatime({
            twelvehour: true
        });

    });


</script>



